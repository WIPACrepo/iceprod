

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Website &mdash; IceProd 2.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/style.css" type="text/css" />
  

  

  
    <link rel="top" title="IceProd 2.1.0 documentation" href="../../index.html"/>
        <link rel="up" title="IceProd Server Details" href="index.html"/>
        <link rel="next" title="Extras" href="../../extra_details.html"/>
        <link rel="prev" title="Asynchronous Programming" href="async.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> IceProd
          

          
          </a>

          
            
            
              <div class="version">
                2.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core/index.html">IceProd Core</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">IceProd Server</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../details.html">Technical Details</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../core/details/index.html">IceProd Core</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">IceProd Server Details</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#queueing">Queueing</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#database">Database</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#website">Website</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="async.html">Asynchronous Programming</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Website</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#task-communication">Task Communication</a></li>
<li class="toctree-l5"><a class="reference internal" href="#site-to-site-communication">Site-to-Site Communication</a></li>
<li class="toctree-l5"><a class="reference internal" href="#human-interaction">Human Interaction</a></li>
<li class="toctree-l5"><a class="reference internal" href="#nginx">Nginx</a></li>
<li class="toctree-l5"><a class="reference internal" href="#security">Security</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#user-accounts">User Accounts</a></li>
<li class="toctree-l6"><a class="reference internal" href="#csrf">CSRF</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#headers">Headers</a></li>
<li class="toctree-l7"><a class="reference internal" href="#login">Login</a><ul>
<li class="toctree-l8"><a class="reference internal" href="#web-login">Web Login</a></li>
<li class="toctree-l8"><a class="reference internal" href="#json-rpc-login">JSON-RPC Login</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#proxying">Proxying</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#other-utilities">Other Utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../extra_details.html">Extras</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">IceProd</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div style="float:right">
            <a href="https://github.com/WIPACrepo/iceprod" class="fa fa-github"> Edit on GitHub</a>
          </div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="website">
<h1>Website<a class="headerlink" href="#website" title="Permalink to this headline">¶</a></h1>
<p>The website is the main way to communicate with IceProd.  It handles several
different jobs:</p>
<ul>
<li><dl class="first docutils">
<dt>Human</dt>
<dd><ul class="first last simple">
<li>dataset submission</li>
<li>dataset editing, other in progress actions</li>
<li>viewing progress</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Computer</dt>
<dd><ul class="first last simple">
<li>running task communications</li>
<li>site-to-site communications</li>
<li>file downloads</li>
<li>file proxying</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>In order to handle the many hundreds or thousands of requests it could get,
the website was built on <a class="reference internal" href="async.html#async"><span class="std std-ref">Asynchronous Programming</span></a>.</p>
<div class="section" id="task-communication">
<h2>Task Communication<a class="headerlink" href="#task-communication" title="Permalink to this headline">¶</a></h2>
<p>Tasks communicate with the server using a json-rpc interface built into the
website.  For most communications, this involves talking with the database
using the internal RPC.</p>
</div>
<div class="section" id="site-to-site-communication">
<h2>Site-to-Site Communication<a class="headerlink" href="#site-to-site-communication" title="Permalink to this headline">¶</a></h2>
<p>Communication between sites also use the json-rpc interface in the website.</p>
</div>
<div class="section" id="human-interaction">
<h2>Human Interaction<a class="headerlink" href="#human-interaction" title="Permalink to this headline">¶</a></h2>
<p>The website can modify things in the database using ajax and the json-rpc
interface in the website.</p>
</div>
<div class="section" id="nginx">
<h2>Nginx<a class="headerlink" href="#nginx" title="Permalink to this headline">¶</a></h2>
<p>The website uses nginx as a front end proxy.  Nginx handles all SSL
certificate checking, static files, and file uploading before proxying the
request to Tornado.</p>
<p>Note that Apache can also be used separately, while Nginx config is built-in.</p>
</div>
<div class="section" id="security">
<h2>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h2>
<div class="section" id="user-accounts">
<h3>User Accounts<a class="headerlink" href="#user-accounts" title="Permalink to this headline">¶</a></h3>
<p>The default account is a username and password.</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol">LDAP</a>
functionality can be enabled to authenticate supplied passwords against
LDAP.  This removes the ability to create new accounts or change passwords
from IceProd, as this needs to be done on the LDAP server.</p>
<p>An X509 (gridftp) proxy certificate can also be linked to an account for
use with datasets submitted by that user.</p>
</div>
<div class="section" id="csrf">
<h3>CSRF<a class="headerlink" href="#csrf" title="Permalink to this headline">¶</a></h3>
<p>To protect against Cross-Site Request Forgery (and other session-stealing
attacks), the following schemes are used:</p>
<div class="section" id="headers">
<h4>Headers<a class="headerlink" href="#headers" title="Permalink to this headline">¶</a></h4>
<p>If available, the <cite>Origin</cite> or <cite>Referer</cite> headers are checked.
If they are not available, JSON-RPC requests are passed while
other requests are blocked.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Why are JSON-RPC requests passed?</p>
<p>This is because JSON-RPC serves multiple purposes.  Only one of them
is for website requests.  One other is as an API for scripts or other
external entities.  But the main purpose is for IceProd task and site
communication.  In order to not hinder these uses, the headers are left
unchecked.</p>
<p class="last">Note that JSON-RPC does not use the user login cookie, so it cannnot be
tricked into running cross-site requests that way.</p>
</div>
</div>
<div class="section" id="login">
<h4>Login<a class="headerlink" href="#login" title="Permalink to this headline">¶</a></h4>
<p>There are two different types of login, which are treated differently.</p>
<div class="section" id="web-login">
<h5>Web Login<a class="headerlink" href="#web-login" title="Permalink to this headline">¶</a></h5>
<p>The initial web login will save a secure cookie to identify the user, but
this will not in itself grant any access to JSON-RPC or secure areas. The
lifetime for the login is measured in days, and is configurable.</p>
<p>When loading a page that needs to make JSON-RPC requests, a very limited
lifetime passkey is generated (assume 15 minutes) and inserted in a hidden
field in the html.  This passkey is then added to JSON-RPC requests.</p>
<p>Secure areas like account details will require a second login before granting
access.</p>
</div>
<div class="section" id="json-rpc-login">
<h5>JSON-RPC Login<a class="headerlink" href="#json-rpc-login" title="Permalink to this headline">¶</a></h5>
<p>This version directly returns the passkey necessary to execute authenticated
JSON-RPC requests.  It has a fairly limited lifetime and is designed to be
used immediately within the same script.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Anyone with the passkey can impersonate you for the lifetime of the key.
Try not to save it to file, and dispose of it when finished.</p>
</div>
</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../extra_details.html" class="btn btn-neutral float-right" title="Extras" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="async.html" class="btn btn-neutral" title="Asynchronous Programming" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, IceCube Collaboration.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>