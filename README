IceProd

IceProd is a Python framework for distributed management of batch jobs.  It runs as a layer on top of other batch middleware such as CREAM, Condor, and PBS and can pool together resources from different batch systems.  The primary purpose is to coordinate and administer many large sets of jobs at once, keeping a history of the entire job lifecycle.


-----------------

For IceCube users with CVMFS access, IceProd is already installed.  To load the environment execute:
/cvmfs/icecube.wisc.edu/iceprod/stable/env-shell.sh

-----------------


Installation:

Install IceProd using the handy install script:
    python install.py

This checks for dependencies and calls each module's setup.py script.


Prerequisites:

IceProd runs on python 2.7

The following is required:

Programs:
* curl
* p7zip
* nginx

Python libraries:
* pycurl
* tornado
* jsonrpclib
* tornadorpc
* lxml
* configobj

There are two types of database interface available:
* sqlite:  depends on apsw: http://code.google.com/p/apsw/
* mysql:   depends on mysqldb: https://pypi.python.org/pypi/MySQL-python

Other non-essential dependencies:
* libtool     (a globus dependency)
* perl 5.10 + modules: Archive::Tar Compress::Zlib Digest::MD5 File::Spec IO::Zlib Pod::Parser XML::Parser
              (a globus dependency)
* globus      (for gridftp)
* git         (for something?)
* squid       (for http proxy)
Python non-essentials:
* pyasn1      (for generating ssl certs)
* pyopenssl   (for generating ssl certs)
* pyuv        (for async file operations)
* pyuv_tornado(for async file operations)
* pygridftp   (for gridftp-python integration)
* sphinx      (for generating documentation)
* coverage    (for tests)
* flexmock    (for tests)


Easy Install of Prerequisites:

Homebrew (http://brew.sh)
and the Linuxbrew fork (https://github.com/Homebrew/linuxbrew)
greatly simplify installation.

Requirements:
    a compiler
    curl, git, ruby
    openssl-dev, libz-dev, libbz2-dev, libncurses-dev, libxml2-dev, libxslt-dev, libexpat1-dev
Install Homebrew to the directory of your choice:
    git clone https://github.com/Homebrew/linuxbrew.git ~/.linuxbrew
    echo "export PATH=~/.linuxbrew/bin:~/.linuxbrew/sbin:$PATH" >> ~/.bash_profile
    echo "export LD_LIBRARY_PATH=~/.linuxbrew/lib:$LD_LIBRARY_PATH" >> ~/.bash_profile
    export PATH=~/.linuxbrew/bin:~/.linuxbrew/sbin:$PATH
    export LD_LIBRARY_PATH=~/.linuxbrew/lib:$LD_LIBRARY_PATH
Tap the iceprod repository:
    brew tap dsschult/iceprod
Install the main dependencies:
    brew install curl
    brew link curl --force
    brew install readline
    brew link readline --force
    brew install dsschult/iceprod/python
    brew install dsschult/iceprod/p7zip
    brew install nginx
    brew install apsw
    brew install tornadorpc
    pip install pycurl tornado jsonrpclib lxml configobj
Install optional dependencies:
    curl -kL http://install.perlbrew.pl | bash
    echo "source ~/perl5/perlbrew/etc/bashrc" >> ~/.bash_profile
    source ~/perl5/perlbrew/etc/bashrc
    perlbrew install perl-5.18.1
    perlbrew switch perl-5.18.1
    cpan App::cpanminus
    cpanm Archive::Tar Compress::Zlib Digest::MD5 File::Spec IO::Zlib Pod::Parser Test::Simple XML::Parser
    brew install dsschult/iceprod/libtool
    brew install dsschult/iceprod/globus-toolkit --gridftp-only
    echo "export GLOBUS_LOCATION=~/.linuxbrew" >> ~/.bash_profile
    export GLOBUS_LOCATION=~/.linuxbrew
    brew install git
    brew install squid
    pip install pyasn1 pyopenssl pyuv sphinx coverage flexmock
    brew install pyuv_tornado
    brew install python-gridftp

